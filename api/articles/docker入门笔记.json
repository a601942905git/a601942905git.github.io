{"title":"docker入门笔记","uid":"ef54352044e70ece8fc193948e3b79c1","slug":"docker入门笔记","date":"2023-03-05T12:35:00.000Z","updated":"2023-03-05T12:35:45.586Z","comments":true,"path":"api/articles/docker入门笔记.json","keywords":null,"cover":[],"content":"<h2 id=\"1-docker概述\"><a href=\"#1-docker概述\" class=\"headerlink\" title=\"1.docker概述\"></a>1.docker概述</h2><p>Docker是一个开源的容器化平台，它可以将应用程序及其所有依赖项打包成一个独立的可移植的容器。Docker容器提供了一个隔离的环境，使得应用程序可以在不同的操作系统和平台上运行，同时保证了应用程序的一致性和可移植性。</p>\n<h3 id=\"1-1-容器与虚拟机的区别\"><a href=\"#1-1-容器与虚拟机的区别\" class=\"headerlink\" title=\"1.1 容器与虚拟机的区别\"></a>1.1 容器与虚拟机的区别</h3><h4 id=\"1-1-1-容器\"><a href=\"#1-1-1-容器\" class=\"headerlink\" title=\"1.1.1 容器\"></a>1.1.1 容器</h4><p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/20230219164600.png\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Containers are an abstraction at the app layer that packages code and dependencies together. Multiple containers can run on the same machine and share the OS kernel with other containers, each running as isolated processes in user space. Containers take up less space than VMs (container images are typically tens of MBs in size), can handle more applications and require fewer VMs and Operating systems.</p></blockquote>\n<h4 id=\"1-1-2-虚拟机\"><a href=\"#1-1-2-虚拟机\" class=\"headerlink\" title=\"1.1.2 虚拟机\"></a>1.1.2 虚拟机</h4><p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/20230219164700.png\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Virtual machines (VMs) are an abstraction of physical hardware turning one server into many servers. The hypervisor allows multiple VMs to run on a single machine. Each VM includes a full copy of an operating system, the application, necessary binaries and libraries – taking up tens of GBs. VMs can also be slow to boot.</p></blockquote>\n<h4 id=\"1-1-3-参考文档\"><a href=\"#1-1-3-参考文档\" class=\"headerlink\" title=\"1.1.3 参考文档\"></a>1.1.3 参考文档</h4><p><a href=\"https://www.docker.com/resources/what-container/\">what-container</a></p>\n<h2 id=\"2-docker安装\"><a href=\"#2-docker安装\" class=\"headerlink\" title=\"2.docker安装\"></a>2.docker安装</h2><p>通过<a href=\"https://www.docker.com/get-started/\">Get Started with Docker</a>下载<code>docker</code>应用</p>\n<h2 id=\"3-docker命令\"><a href=\"#3-docker命令\" class=\"headerlink\" title=\"3.docker命令\"></a>3.docker命令</h2><h3 id=\"3-1-镜像命令\"><a href=\"#3-1-镜像命令\" class=\"headerlink\" title=\"3.1 镜像命令\"></a>3.1 镜像命令</h3><h4 id=\"3-1-1-搜索镜像\"><a href=\"#3-1-1-搜索镜像\" class=\"headerlink\" title=\"3.1.1 搜索镜像\"></a>3.1.1 搜索镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> search nginx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-1-2-拉取镜像\"><a href=\"#3-1-2-拉取镜像\" class=\"headerlink\" title=\"3.1.2 拉取镜像\"></a>3.1.2 拉取镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> pull nginx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-1-3-运行镜像\"><a href=\"#3-1-3-运行镜像\" class=\"headerlink\" title=\"3.1.3 运行镜像\"></a>3.1.3 运行镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> nginx <span class=\"token parameter variable\">-p</span> 宿主机端口:容器端口 <span class=\"token parameter variable\">-v</span> 宿主机路径:容器路径 <span class=\"token parameter variable\">-d</span> nginx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>–name：指定容器名称；-p：指定端口映射；-v：指定挂载卷映射； -d：后台方式运行</p></blockquote>\n<h4 id=\"3-1-4-查看本地镜像\"><a href=\"#3-1-4-查看本地镜像\" class=\"headerlink\" title=\"3.1.4 查看本地镜像\"></a>3.1.4 查看本地镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> images<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-1-5-删除镜像\"><a href=\"#3-1-5-删除镜像\" class=\"headerlink\" title=\"3.1.5 删除镜像\"></a>3.1.5 删除镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> rmi 镜像id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-1-6-查看镜像详细信息\"><a href=\"#3-1-6-查看镜像详细信息\" class=\"headerlink\" title=\"3.1.6 查看镜像详细信息\"></a>3.1.6 查看镜像详细信息</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> inspect 镜像id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"3-2-容器命令\"><a href=\"#3-2-容器命令\" class=\"headerlink\" title=\"3.2 容器命令\"></a>3.2 容器命令</h3><h4 id=\"3-2-1-查看所有容器\"><a href=\"#3-2-1-查看所有容器\" class=\"headerlink\" title=\"3.2.1 查看所有容器\"></a>3.2.1 查看所有容器</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">ps</span> <span class=\"token parameter variable\">-a</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-2-查看所有已启动容器\"><a href=\"#3-2-2-查看所有已启动容器\" class=\"headerlink\" title=\"3.2.2 查看所有已启动容器\"></a>3.2.2 查看所有已启动容器</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">ps</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-3-启动容器\"><a href=\"#3-2-3-启动容器\" class=\"headerlink\" title=\"3.2.3 启动容器\"></a>3.2.3 启动容器</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> start 容器id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-4-停止容器\"><a href=\"#3-2-4-停止容器\" class=\"headerlink\" title=\"3.2.4 停止容器\"></a>3.2.4 停止容器</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> stop 容器id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-5-重启容器\"><a href=\"#3-2-5-重启容器\" class=\"headerlink\" title=\"3.2.5 重启容器\"></a>3.2.5 重启容器</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> restart 容器id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-6-进入容器内部\"><a href=\"#3-2-6-进入容器内部\" class=\"headerlink\" title=\"3.2.6 进入容器内部\"></a>3.2.6 进入容器内部</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> 容器id /bin/bash<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-7-删除容器\"><a href=\"#3-2-7-删除容器\" class=\"headerlink\" title=\"3.2.7 删除容器\"></a>3.2.7 删除容器</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">rm</span> 容器id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-8-查看容器日志信息\"><a href=\"#3-2-8-查看容器日志信息\" class=\"headerlink\" title=\"3.2.8 查看容器日志信息\"></a>3.2.8 查看容器日志信息</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> logs 容器id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-9-查看容器详细信息\"><a href=\"#3-2-9-查看容器详细信息\" class=\"headerlink\" title=\"3.2.9 查看容器详细信息\"></a>3.2.9 查看容器详细信息</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> inspect 容器id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-10-拷贝容器文件\"><a href=\"#3-2-10-拷贝容器文件\" class=\"headerlink\" title=\"3.2.10 拷贝容器文件\"></a>3.2.10 拷贝容器文件</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">cp</span> 容器id:容器文件路径 宿主机路径<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-11-查看容器指标\"><a href=\"#3-2-11-查看容器指标\" class=\"headerlink\" title=\"3.2.11 查看容器指标\"></a>3.2.11 查看容器指标</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> stats 容器id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-13-查看容器挂载\"><a href=\"#3-2-13-查看容器挂载\" class=\"headerlink\" title=\"3.2.13 查看容器挂载\"></a>3.2.13 查看容器挂载</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> inspect 容器id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token property\">\"Mounts\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token property\">\"Type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"bind\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Source\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"/Users/10007616/software/docker/nginx/nginx.conf\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Destination\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"/etc/nginx/nginx.conf\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Mode\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"ro\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"RW\"</span><span class=\"token operator\">:</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Propagation\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"rprivate\"</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token property\">\"Type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"bind\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Source\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"/Users/10007616/software/docker/nginx/conf.d\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Destination\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"/etc/nginx/conf.d\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Mode\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"RW\"</span><span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Propagation\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"rprivate\"</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Type：挂载类型为双向绑定，任何一处发生改变，另一处也会跟着变化；Souce：宿主机路径；Destination：容器路径；</p></blockquote>\n<h4 id=\"3-2-14-查看容器进程信息\"><a href=\"#3-2-14-查看容器进程信息\" class=\"headerlink\" title=\"3.2.14 查看容器进程信息\"></a>3.2.14 查看容器进程信息</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">top</span> 容器id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-2-15-查看容器资源使用情况\"><a href=\"#3-2-15-查看容器资源使用情况\" class=\"headerlink\" title=\"3.2.15 查看容器资源使用情况\"></a>3.2.15 查看容器资源使用情况</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> stats<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"3-3-docker命令\"><a href=\"#3-3-docker命令\" class=\"headerlink\" title=\"3.3 docker命令\"></a>3.3 docker命令</h3><h4 id=\"3-3-1-查看版本信息\"><a href=\"#3-3-1-查看版本信息\" class=\"headerlink\" title=\"3.3.1 查看版本信息\"></a>3.3.1 查看版本信息</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> version<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-3-2-查看docker详细信息\"><a href=\"#3-3-2-查看docker详细信息\" class=\"headerlink\" title=\"3.3.2 查看docker详细信息\"></a>3.3.2 查看docker详细信息</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> info<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-3-3-查看docker磁盘使用情况\"><a href=\"#3-3-3-查看docker磁盘使用情况\" class=\"headerlink\" title=\"3.3.3 查看docker磁盘使用情况\"></a>3.3.3 查看docker磁盘使用情况</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> system <span class=\"token function\">df</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"3-4-数据卷命令\"><a href=\"#3-4-数据卷命令\" class=\"headerlink\" title=\"3.4 数据卷命令\"></a>3.4 数据卷命令</h3><h4 id=\"3-4-1-查看数据卷列表\"><a href=\"#3-4-1-查看数据卷列表\" class=\"headerlink\" title=\"3.4.1 查看数据卷列表\"></a>3.4.1 查看数据卷列表</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> volume <span class=\"token function\">ls</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-4-2-查看数据卷详情\"><a href=\"#3-4-2-查看数据卷详情\" class=\"headerlink\" title=\"3.4.2 查看数据卷详情\"></a>3.4.2 查看数据卷详情</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> volume inspect 数据卷名称<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"3-5-登录命令\"><a href=\"#3-5-登录命令\" class=\"headerlink\" title=\"3.5 登录命令\"></a>3.5 登录命令</h3><h4 id=\"3-5-1-登录docker-hub\"><a href=\"#3-5-1-登录docker-hub\" class=\"headerlink\" title=\"3.5.1 登录docker hub\"></a>3.5.1 登录docker hub</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> login <span class=\"token parameter variable\">-u</span> 用户名<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"3-5-2-退出登录\"><a href=\"#3-5-2-退出登录\" class=\"headerlink\" title=\"3.5.2 退出登录\"></a>3.5.2 退出登录</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">logout</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"4-docker安装中间件\"><a href=\"#4-docker安装中间件\" class=\"headerlink\" title=\"4.docker安装中间件\"></a>4.docker安装中间件</h2><h3 id=\"4-1-redis\"><a href=\"#4-1-redis\" class=\"headerlink\" title=\"4.1 redis\"></a>4.1 redis</h3><h4 id=\"4-1-1-搜索镜像\"><a href=\"#4-1-1-搜索镜像\" class=\"headerlink\" title=\"4.1.1 搜索镜像\"></a>4.1.1 搜索镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> search redis<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-1-2-拉取镜像\"><a href=\"#4-1-2-拉取镜像\" class=\"headerlink\" title=\"4.1.2 拉取镜像\"></a>4.1.2 拉取镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> pull redis<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-1-3-运行镜像\"><a href=\"#4-1-3-运行镜像\" class=\"headerlink\" title=\"4.1.3 运行镜像\"></a>4.1.3 运行镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> redis <span class=\"token parameter variable\">-p</span> <span class=\"token number\">6379</span>:6379 <span class=\"token parameter variable\">-d</span> redis<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-1-4-运行redis-cli\"><a href=\"#4-1-4-运行redis-cli\" class=\"headerlink\" title=\"4.1.4 运行redis-cli\"></a>4.1.4 运行redis-cli</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> redis容器id redis-cli<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"4-2-nginx\"><a href=\"#4-2-nginx\" class=\"headerlink\" title=\"4.2 nginx\"></a>4.2 nginx</h3><h4 id=\"4-2-1-搜索镜像\"><a href=\"#4-2-1-搜索镜像\" class=\"headerlink\" title=\"4.2.1 搜索镜像\"></a>4.2.1 搜索镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> search nginx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-2-2-拉取镜像\"><a href=\"#4-2-2-拉取镜像\" class=\"headerlink\" title=\"4.2.2 拉取镜像\"></a>4.2.2 拉取镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> pull nginx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-2-3-运行镜像\"><a href=\"#4-2-3-运行镜像\" class=\"headerlink\" title=\"4.2.3 运行镜像\"></a>4.2.3 运行镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> nginx <span class=\"token parameter variable\">-p</span> <span class=\"token number\">80</span>:80 <span class=\"token parameter variable\">-d</span> nginx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-2-4-验证是否安装成功\"><a href=\"#4-2-4-验证是否安装成功\" class=\"headerlink\" title=\"4.2.4 验证是否安装成功\"></a>4.2.4 验证是否安装成功</h4><p>访问<a href=\"http://localhost/\">http://localhost/</a></p>\n<p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/1641622112530.jpg\"></p>\n<p>看到如上结果表明安装成功</p>\n<h4 id=\"4-2-5-复制容器内部配置文件\"><a href=\"#4-2-5-复制容器内部配置文件\" class=\"headerlink\" title=\"4.2.5 复制容器内部配置文件\"></a>4.2.5 复制容器内部配置文件</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">cp</span> nginx:/etc/nginx/nginx.conf path/nginx<span class=\"token punctuation\">[</span>宿主机放配置文件路径<span class=\"token punctuation\">]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-2-6-删除容器\"><a href=\"#4-2-6-删除容器\" class=\"headerlink\" title=\"4.2.6 删除容器\"></a>4.2.6 删除容器</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token function\">rm</span> <span class=\"token parameter variable\">-f</span> nginx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-2-7-挂载配置运行镜像\"><a href=\"#4-2-7-挂载配置运行镜像\" class=\"headerlink\" title=\"4.2.7 挂载配置运行镜像\"></a>4.2.7 挂载配置运行镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> nginx <span class=\"token parameter variable\">-p</span> <span class=\"token number\">80</span>:80 <span class=\"token parameter variable\">-v</span> <span class=\"token punctuation\">[</span>宿主机路径<span class=\"token punctuation\">]</span>/nginx/nginx.conf:/etc/nginx/nginx.conf:ro <span class=\"token parameter variable\">-v</span> <span class=\"token punctuation\">[</span>宿主机路径<span class=\"token punctuation\">]</span>/nginx/conf.d:/etc/nginx/conf.d <span class=\"token parameter variable\">-d</span> nginx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ro：read only，表示容器中的&#x2F;etc&#x2F;nginx&#x2F;nginx.conf只可读不可写</p></blockquote>\n<h3 id=\"4-3-rabbitmq\"><a href=\"#4-3-rabbitmq\" class=\"headerlink\" title=\"4.3 rabbitmq\"></a>4.3 rabbitmq</h3><h4 id=\"4-3-1-搜索镜像\"><a href=\"#4-3-1-搜索镜像\" class=\"headerlink\" title=\"4.3.1 搜索镜像\"></a>4.3.1 搜索镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> search rabbitmq<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-3-2-拉取镜像\"><a href=\"#4-3-2-拉取镜像\" class=\"headerlink\" title=\"4.3.2 拉取镜像\"></a>4.3.2 拉取镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> pull arm64v8/rabbitmq:3.9.10-management<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-3-3-运行镜像\"><a href=\"#4-3-3-运行镜像\" class=\"headerlink\" title=\"4.3.3 运行镜像\"></a>4.3.3 运行镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> rabbitmq <span class=\"token parameter variable\">-p</span> <span class=\"token number\">15672</span>:15672 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">5672</span>:5672 <span class=\"token parameter variable\">-d</span> arm64v8/rabbitmq:3.9.10-management<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>rabbitmq使用指定版本的镜像，因此在运行的时候同样需要指定版本</p></blockquote>\n<h3 id=\"4-4-elasticsearch\"><a href=\"#4-4-elasticsearch\" class=\"headerlink\" title=\"4.4 elasticsearch\"></a>4.4 elasticsearch</h3><h4 id=\"4-4-1-搜索镜像\"><a href=\"#4-4-1-搜索镜像\" class=\"headerlink\" title=\"4.4.1 搜索镜像\"></a>4.4.1 搜索镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> search elasticsearch<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-4-2-拉取镜像\"><a href=\"#4-4-2-拉取镜像\" class=\"headerlink\" title=\"4.4.2 拉取镜像\"></a>4.4.2 拉取镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> pull elasticsearch:7.16.2<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"4-4-3-运行镜像\"><a href=\"#4-4-3-运行镜像\" class=\"headerlink\" title=\"4.4.3 运行镜像\"></a>4.4.3 运行镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--name</span> elasticsearch <span class=\"token parameter variable\">-p</span> <span class=\"token number\">9200</span>:9200 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">9300</span>:9300 <span class=\"token parameter variable\">-e</span> <span class=\"token string\">\"discovery.type=single-node\"</span> elasticsearch:7.16.2<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>discovery.type&#x3D;single-node 单机版运行es</p></blockquote>\n<h2 id=\"5-SpringBoot集成Docker\"><a href=\"#5-SpringBoot集成Docker\" class=\"headerlink\" title=\"5.SpringBoot集成Docker\"></a>5.SpringBoot集成Docker</h2><h3 id=\"5-1-编写Dockerfile\"><a href=\"#5-1-编写Dockerfile\" class=\"headerlink\" title=\"5.1 编写Dockerfile\"></a>5.1 编写Dockerfile</h3><pre class=\"line-numbers language-docker\" data-language=\"docker\"><code class=\"language-docker\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> openjdk:8-jdk-alpine</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ARG</span> JAR_FILE=target/*.jar</span>\n<span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token variable\">$&#123;JAR_FILE&#125;</span> app.jar</span>\n<span class=\"token instruction\"><span class=\"token keyword\">ENTRYPOINT</span> [<span class=\"token string\">\"java\"</span>,<span class=\"token string\">\"-jar\"</span>,<span class=\"token string\">\"/app.jar\"</span>]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>FROM：指定基础环境；ARG：定义参数(只在构建过程中生效)；COPY：拷贝内容到容器；ENTRYPOINT：容器启动后需要执行的命令</p></blockquote>\n<h3 id=\"5-2-根据Dockerfile构建镜像\"><a href=\"#5-2-根据Dockerfile构建镜像\" class=\"headerlink\" title=\"5.2 根据Dockerfile构建镜像\"></a>5.2 根据Dockerfile构建镜像</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> build <span class=\"token parameter variable\">-f</span> Dockerfile <span class=\"token parameter variable\">-t</span> boot-docker <span class=\"token builtin class-name\">.</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>镜像的构建依赖Dockerfile和上下文。-f：Dockerfile文件路径；-t：镜像名；.：表示使用当前目录作为构建镜像的上下文<a href=\"https://docs.docker.com/engine/reference/builder/#usage\">usage</a>。当文件名为Dcokerfile时也可以不指定文件路径</p></blockquote>\n<h3 id=\"5-3-启动镜像\"><a href=\"#5-3-启动镜像\" class=\"headerlink\" title=\"5.3 启动镜像\"></a>5.3 启动镜像</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> boot-docker <span class=\"token parameter variable\">-p</span> <span class=\"token number\">8080</span>:8080 c14355ebba99 <span class=\"token parameter variable\">-d</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"5-4-访问服务\"><a href=\"#5-4-访问服务\" class=\"headerlink\" title=\"5.4 访问服务\"></a>5.4 访问服务</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> localhost:8080<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h4 id=\"5-5-推送镜像\"><a href=\"#5-5-推送镜像\" class=\"headerlink\" title=\"5.5 推送镜像\"></a>5.5 推送镜像</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> push boot-docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>denied: requested access to the resource is denied，提示：请求访问资源被拒绝</p></blockquote>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> push xxx/boot-docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>xxx：docker hub用户名，An image does not exist locally with the tag: xxx&#x2F;boot-docker，提示本地没有对应tag的镜像</p></blockquote>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> tag boot-docker xxx/boot-docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> push xxx/boot-docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"6-数据卷\"><a href=\"#6-数据卷\" class=\"headerlink\" title=\"6.数据卷\"></a>6.数据卷</h2><h3 id=\"6-1-匿名数据卷\"><a href=\"#6-1-匿名数据卷\" class=\"headerlink\" title=\"6.1 匿名数据卷\"></a>6.1 匿名数据卷</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> nginx01 <span class=\"token parameter variable\">-v</span> /etc/nginx/c <span class=\"token parameter variable\">-d</span> nginx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>只指定容器路径，可以创建匿名数据卷</p></blockquote>\n<p>通过<code>docker inspect 容器id</code>命令查看挂载情况</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token property\">\"Mounts\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token property\">\"Type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"volume\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"77ca937d011be191f9a619bab5182d2f76a92f134abcf32ccfece9e152914533\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Source\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"/var/lib/docker/volumes/77ca937d011be191f9a619bab5182d2f76a92f134abcf32ccfece9e152914533/_data\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Destination\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"/etc/nginx/c\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Driver\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"local\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Mode\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"RW\"</span><span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Propagation\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"\"</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"6-2-具明数据卷\"><a href=\"#6-2-具明数据卷\" class=\"headerlink\" title=\"6.2 具明数据卷\"></a>6.2 具明数据卷</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> nginx02 <span class=\"token parameter variable\">-v</span> mynginx:/etc/nginx/c <span class=\"token parameter variable\">-d</span> nginx<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>mynginx：数据卷名称</p></blockquote>\n<h3 id=\"6-3无法访问-x2F-var-x2F-lib-x2F-docker\"><a href=\"#6-3无法访问-x2F-var-x2F-lib-x2F-docker\" class=\"headerlink\" title=\"6.3无法访问&#x2F;var&#x2F;lib&#x2F;docker\"></a>6.3无法访问&#x2F;var&#x2F;lib&#x2F;docker</h3><p>解决方案：<a href=\"https://zhuanlan.zhihu.com/p/397425187\">解决Mac OS挂载后找不到var&#x2F;lib&#x2F;docker</a></p>\n<h2 id=\"7-dockerfile\"><a href=\"#7-dockerfile\" class=\"headerlink\" title=\"7.dockerfile\"></a>7.dockerfile</h2><h3 id=\"7-1-dockerfile常用命令\"><a href=\"#7-1-dockerfile常用命令\" class=\"headerlink\" title=\"7.1 dockerfile常用命令\"></a>7.1 dockerfile常用命令</h3><h4 id=\"7-1-1-FROM\"><a href=\"#7-1-1-FROM\" class=\"headerlink\" title=\"7.1.1 FROM\"></a>7.1.1 FROM</h4><p><code>FROM</code>指令用于初始化一个新的构建阶段并设置基础镜像，有效<code>Dockerfile</code>必须以<code>FROM</code>指令开头</p>\n<h4 id=\"7-1-2-WORKDIR\"><a href=\"#7-1-2-WORKDIR\" class=\"headerlink\" title=\"7.1.2 WORKDIR\"></a>7.1.2 WORKDIR</h4><p><code>WORKDIR</code>指令用于指定工作目录，以<code>redis</code>为例，通过<a href=\"https://github.com/docker-library/redis/blob/master/7.0/Dockerfile\">redis的Dockerfile</a>文件可得知其<code>WORKDIR</code>指定的是<code>/data</code>，运行并进入<code>redis</code>容器，输入<code>pwd</code>命令，可以看到当前工作目录为<code>/data</code></p>\n<p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/20230225181300.png\"></p>\n<h4 id=\"7-1-3-COPY\"><a href=\"#7-1-3-COPY\" class=\"headerlink\" title=\"7.1.3 COPY\"></a>7.1.3 COPY</h4><p><code>COPY</code>命令用于将<code>文件</code>或<code>目录</code>拷贝到容器目标路径</p>\n<h4 id=\"7-1-4-RUN\"><a href=\"#7-1-4-RUN\" class=\"headerlink\" title=\"7.1.4 RUN\"></a>7.1.4 RUN</h4><p><code>RUN</code>指令用于指定命令，<code>docker build</code>时执行</p>\n<h4 id=\"7-1-5-CMD\"><a href=\"#7-1-5-CMD\" class=\"headerlink\" title=\"7.1.5 CMD\"></a>7.1.5 CMD</h4><p><code>CMD</code>指令用于运行可执行程序</p>\n<p>一个<code>dockerfile</code>文件中只能有一个<code>CMD</code>指令，如果存在多个<code>CMD</code>指令，只有最后一个命令生效</p>\n<p><code>CMD</code>命令和<code>ENTRYPOINT</code>命令同时存在时，<code>CMD</code>命令会拼接在<code>ENTRYPOINT</code>后面</p>\n<h4 id=\"7-1-6-ENTRYPOINT\"><a href=\"#7-1-6-ENTRYPOINT\" class=\"headerlink\" title=\"7.1.6 ENTRYPOINT\"></a>7.1.6 ENTRYPOINT</h4><p><code>ENTRYPOINT</code>指定用于运行可执行程序</p>\n<p><code>docker run &lt;image&gt;</code>中指定的命令行参数会被追加到<code>ENTRYPOINT</code>指令中并且会覆盖<code>CMD</code>命令</p>\n<p>示例<code>docker run &lt;image&gt; -d</code>将会把<code>-d</code>参数追加到<code>ENTRYPOINT</code>中</p>\n<h4 id=\"7-1-7-ENV\"><a href=\"#7-1-7-ENV\" class=\"headerlink\" title=\"7.1.7 ENV\"></a>7.1.7 ENV</h4><p><code>ENV</code>指令用于设置环境变量</p>\n<h4 id=\"7-1-8-ARG\"><a href=\"#7-1-8-ARG\" class=\"headerlink\" title=\"7.1.8 ARG\"></a>7.1.8 ARG</h4><p><code>ARG</code>是唯一一个先于<code>FROM</code>的指令，<code>ARG</code>指令先于<code>FROM</code>，作用域在构建范围之外，因此后续无法访问<code>ARG</code>声明的变量</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ARG <span class=\"token assign-left variable\">VERSION</span><span class=\"token operator\">=</span>latest\nFROM nginx:<span class=\"token variable\">$VERSION</span>\nARG VERSIONRUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'=====>'</span> + <span class=\"token variable\">$VERSION</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>构建过程中输出结果：&#x3D;&gt; [2&#x2F;2] RUN echo ‘&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;’ + $VERSION</p></blockquote>\n<p>想要访问<code>ARG</code>声明的变量，可以在<code>FROM</code>指令之后再次声明</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ARG <span class=\"token assign-left variable\">VERSION</span><span class=\"token operator\">=</span>latest\nFROM nginx:<span class=\"token variable\">$VERSION</span>\nARG VERSION\nRUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'=====>'</span> + <span class=\"token variable\">$VERSION</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>构建过程中输出结果：&#x3D;&gt; [2&#x2F;2] RUN echo ‘&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;’latest</p></blockquote>\n<h2 id=\"8-docker网络\"><a href=\"#8-docker网络\" class=\"headerlink\" title=\"8.docker网络\"></a>8.docker网络</h2><p>启动<code>docker</code>服务，通过<code>ip addr</code>命令可以看到多了一个<code>docker0</code>虚拟网络，该虚拟网络用于<code>容器</code>间通信以及<code>容器</code>与<code>宿主机</code>间通信</p>\n<p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/20230222194900.png\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>注意：macos不会有<code>docker0</code>，Docker for Mac 使用的是 HyperKit 虚拟机，而不是 Linux 的容器技术，因此在 Docker for Mac 上不会出现名为 <code>docker0</code> 的网络接口</p></blockquote>\n<p>使用<code>docker</code>启动<code>nginx</code>服务，通过<code>ip addr</code>命令可以看到多了一个网络接口<code>veth</code></p>\n<p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/20230222200500.png\"></p>\n<p>使用<code>docker exec -it ea478b32553a /bin/bash</code>命令进入<code>nginx容器</code>内部，通过<code>ip addr</code>命令可以看到网络接口<code>eth0</code>和上面的<code>veth</code>是对应的</p>\n<p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/20230223095800.png\"></p>\n<p>使用<code>docker</code>再启动一个<code>redis</code>服务，同样可以看到配对的<code>veth</code>和<code>eth0</code></p>\n<p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/20230223101300.png\"></p>\n<h3 id=\"8-1-网络结构\"><a href=\"#8-1-网络结构\" class=\"headerlink\" title=\"8.1 网络结构\"></a>8.1 网络结构</h3><p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/20230223102600.png\"></p>\n<h3 id=\"8-2-网络模式\"><a href=\"#8-2-网络模式\" class=\"headerlink\" title=\"8.2 网络模式\"></a>8.2 网络模式</h3><h4 id=\"8-2-1-查看网络模式\"><a href=\"#8-2-1-查看网络模式\" class=\"headerlink\" title=\"8.2.1 查看网络模式\"></a>8.2.1 查看网络模式</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> network <span class=\"token function\">ls</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<table>\n<thead>\n<tr>\n<th>序号</th>\n<th>网络名称</th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>bridge(网桥)，启动一个docker容器时，docker会为该容器创建一个虚拟网络接口，并连接到docker管理的虚拟网络中</td>\n</tr>\n<tr>\n<td>2</td>\n<td>host(主机)</td>\n</tr>\n<tr>\n<td>3</td>\n<td>none</td>\n</tr>\n</tbody></table>\n<h4 id=\"8-2-2-brige\"><a href=\"#8-2-2-brige\" class=\"headerlink\" title=\"8.2.2 brige\"></a>8.2.2 brige</h4><p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/20230216095300.png\"></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>brige是docker默认的网络模式</p></blockquote>\n<h4 id=\"8-2-3-host\"><a href=\"#8-2-3-host\" class=\"headerlink\" title=\"8.2.3 host\"></a>8.2.3 host</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">➜  ~ <span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> redis-test <span class=\"token parameter variable\">-p</span> <span class=\"token number\">6380</span>:6380 <span class=\"token parameter variable\">--network</span> <span class=\"token function\">host</span> <span class=\"token parameter variable\">-d</span> redis\nWARNING: Published ports are discarded when using <span class=\"token function\">host</span> network mode\n2197958dece209709d777f6374eca7ecc44963deb09aeac062cdd5d8ec62f570<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>使用host网络模式运行容器并指定端口映射关系会出现waring提示，意思就是当使用host网络模式的时候，指定端口映射关系也没用，使用的是宿主机的ip和端口</p></blockquote>\n<p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/20230216100500.png\"></p>\n<h4 id=\"8-2-4-none\"><a href=\"#8-2-4-none\" class=\"headerlink\" title=\"8.2.4 none\"></a>8.2.4 none</h4><p>网络模式为<code>none</code>表示既没有自己的ip配置也不使用的宿主机的ip配置</p>\n<h2 id=\"9-容器编排docker-compse\"><a href=\"#9-容器编排docker-compse\" class=\"headerlink\" title=\"9. 容器编排docker-compse\"></a>9. 容器编排docker-compse</h2><h2 id=\"10-容器管理平台portainer\"><a href=\"#10-容器管理平台portainer\" class=\"headerlink\" title=\"10. 容器管理平台portainer\"></a>10. 容器管理平台portainer</h2><h3 id=\"10-1-安装运行\"><a href=\"#10-1-安装运行\" class=\"headerlink\" title=\"10.1 安装运行\"></a>10.1 安装运行</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">8000</span>:8000 <span class=\"token parameter variable\">-p</span> <span class=\"token number\">9443</span>:9443 <span class=\"token parameter variable\">--name</span> portainer <span class=\"token parameter variable\">--restart</span><span class=\"token operator\">=</span>always <span class=\"token parameter variable\">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class=\"token parameter variable\">-v</span> xxx/docker/portainer/data:/data portainer/portainer-ce:latest<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"10-2-访问服务\"><a href=\"#10-2-访问服务\" class=\"headerlink\" title=\"10.2 访问服务\"></a>10.2 访问服务</h3><p>在浏览器中输入：<a href=\"https://localhost:9443即可访问`potainer`服务\">https://localhost:9443即可访问`potainer`服务</a></p>\n<p><img src=\"https://wolf-heart.oss-cn-beijing.aliyuncs.com/blog/docker/20230225175800.png\"></p>\n<h2 id=\"11-重量级监控\"><a href=\"#11-重量级监控\" class=\"headerlink\" title=\"11.重量级监控\"></a>11.重量级监控</h2><h3 id=\"11-1-CAdvisor\"><a href=\"#11-1-CAdvisor\" class=\"headerlink\" title=\"11.1 CAdvisor\"></a>11.1 CAdvisor</h3><p>监控数据收集</p>\n<h3 id=\"11-2-InfluxDB\"><a href=\"#11-2-InfluxDB\" class=\"headerlink\" title=\"11.2 InfluxDB\"></a>11.2 InfluxDB</h3><p>监控数据存储</p>\n<h3 id=\"11-3-grafana\"><a href=\"#11-3-grafana\" class=\"headerlink\" title=\"11.3 grafana\"></a>11.3 grafana</h3><p>展示图标</p>\n","feature":true,"text":"1.docker概述Docker是一个开源的容器化平台，它可以将应用程序及其所有依赖项打包成一个独立的可移植的容器。Docker容器提供了一个隔离的环境，使得应用程序可以在不同的操作系统和平台上运行，同时保证了应用程序的一致性和可移植性。 1.1 容器与虚拟机的区别1.1.1 容...","link":"","photos":[],"count_time":{"symbolsCount":"7.7k","symbolsTime":"7 mins."},"categories":[{"name":"容器","slug":"容器","count":1,"path":"api/categories/容器.json"}],"tags":[{"name":"docker","slug":"docker","count":1,"path":"api/tags/docker.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-docker%E6%A6%82%E8%BF%B0\"><span class=\"toc-text\">1.docker概述</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-1-%E5%AE%B9%E5%99%A8%E4%B8%8E%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB\"><span class=\"toc-text\">1.1 容器与虚拟机的区别</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-1-%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">1.1.1 容器</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-2-%E8%99%9A%E6%8B%9F%E6%9C%BA\"><span class=\"toc-text\">1.1.2 虚拟机</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-3-%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3\"><span class=\"toc-text\">1.1.3 参考文档</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-docker%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">2.docker安装</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-docker%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.docker命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-1-%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.1 镜像命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-1-%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">3.1.1 搜索镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-2-%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">3.1.2 拉取镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-3-%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">3.1.3 运行镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-4-%E6%9F%A5%E7%9C%8B%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">3.1.4 查看本地镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-5-%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">3.1.5 删除镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-6-%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">3.1.6 查看镜像详细信息</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-2-%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.2 容器命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-1-%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">3.2.1 查看所有容器</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-2-%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E5%B7%B2%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">3.2.2 查看所有已启动容器</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-3-%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">3.2.3 启动容器</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-4-%E5%81%9C%E6%AD%A2%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">3.2.4 停止容器</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-5-%E9%87%8D%E5%90%AF%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">3.2.5 重启容器</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-6-%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8%E5%86%85%E9%83%A8\"><span class=\"toc-text\">3.2.6 进入容器内部</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-7-%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">3.2.7 删除容器</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-8-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">3.2.8 查看容器日志信息</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-9-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">3.2.9 查看容器详细信息</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-10-%E6%8B%B7%E8%B4%9D%E5%AE%B9%E5%99%A8%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">3.2.10 拷贝容器文件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-11-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E6%8C%87%E6%A0%87\"><span class=\"toc-text\">3.2.11 查看容器指标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-13-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E6%8C%82%E8%BD%BD\"><span class=\"toc-text\">3.2.13 查看容器挂载</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-14-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E8%BF%9B%E7%A8%8B%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">3.2.14 查看容器进程信息</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-15-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E8%B5%84%E6%BA%90%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5\"><span class=\"toc-text\">3.2.15 查看容器资源使用情况</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-3-docker%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.3 docker命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-3-1-%E6%9F%A5%E7%9C%8B%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">3.3.1 查看版本信息</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-3-2-%E6%9F%A5%E7%9C%8Bdocker%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">3.3.2 查看docker详细信息</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-3-3-%E6%9F%A5%E7%9C%8Bdocker%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5\"><span class=\"toc-text\">3.3.3 查看docker磁盘使用情况</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-4-%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.4 数据卷命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-4-1-%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%88%97%E8%A1%A8\"><span class=\"toc-text\">3.4.1 查看数据卷列表</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-4-2-%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%8D%B7%E8%AF%A6%E6%83%85\"><span class=\"toc-text\">3.4.2 查看数据卷详情</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-5-%E7%99%BB%E5%BD%95%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3.5 登录命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-5-1-%E7%99%BB%E5%BD%95docker-hub\"><span class=\"toc-text\">3.5.1 登录docker hub</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-5-2-%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95\"><span class=\"toc-text\">3.5.2 退出登录</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-docker%E5%AE%89%E8%A3%85%E4%B8%AD%E9%97%B4%E4%BB%B6\"><span class=\"toc-text\">4.docker安装中间件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-1-redis\"><span class=\"toc-text\">4.1 redis</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-1-1-%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.1.1 搜索镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-1-2-%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.1.2 拉取镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-1-3-%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.1.3 运行镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-1-4-%E8%BF%90%E8%A1%8Credis-cli\"><span class=\"toc-text\">4.1.4 运行redis-cli</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-2-nginx\"><span class=\"toc-text\">4.2 nginx</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-2-1-%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.2.1 搜索镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-2-2-%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.2.2 拉取镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-2-3-%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.2.3 运行镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-2-4-%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F\"><span class=\"toc-text\">4.2.4 验证是否安装成功</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-2-5-%E5%A4%8D%E5%88%B6%E5%AE%B9%E5%99%A8%E5%86%85%E9%83%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">4.2.5 复制容器内部配置文件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-2-6-%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">4.2.6 删除容器</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-2-7-%E6%8C%82%E8%BD%BD%E9%85%8D%E7%BD%AE%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.2.7 挂载配置运行镜像</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-3-rabbitmq\"><span class=\"toc-text\">4.3 rabbitmq</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-3-1-%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.3.1 搜索镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-3-2-%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.3.2 拉取镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-3-3-%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.3.3 运行镜像</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-4-elasticsearch\"><span class=\"toc-text\">4.4 elasticsearch</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-4-1-%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.4.1 搜索镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-4-2-%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.4.2 拉取镜像</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-4-3-%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">4.4.3 运行镜像</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-SpringBoot%E9%9B%86%E6%88%90Docker\"><span class=\"toc-text\">5.SpringBoot集成Docker</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-1-%E7%BC%96%E5%86%99Dockerfile\"><span class=\"toc-text\">5.1 编写Dockerfile</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-2-%E6%A0%B9%E6%8D%AEDockerfile%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">5.2 根据Dockerfile构建镜像</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-3-%E5%90%AF%E5%8A%A8%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">5.3 启动镜像</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-4-%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">5.4 访问服务</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-5-%E6%8E%A8%E9%80%81%E9%95%9C%E5%83%8F\"><span class=\"toc-text\">5.5 推送镜像</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#6-%E6%95%B0%E6%8D%AE%E5%8D%B7\"><span class=\"toc-text\">6.数据卷</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-1-%E5%8C%BF%E5%90%8D%E6%95%B0%E6%8D%AE%E5%8D%B7\"><span class=\"toc-text\">6.1 匿名数据卷</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-2-%E5%85%B7%E6%98%8E%E6%95%B0%E6%8D%AE%E5%8D%B7\"><span class=\"toc-text\">6.2 具明数据卷</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE-x2F-var-x2F-lib-x2F-docker\"><span class=\"toc-text\">6.3无法访问&#x2F;var&#x2F;lib&#x2F;docker</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#7-dockerfile\"><span class=\"toc-text\">7.dockerfile</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#7-1-dockerfile%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">7.1 dockerfile常用命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-1-1-FROM\"><span class=\"toc-text\">7.1.1 FROM</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-1-2-WORKDIR\"><span class=\"toc-text\">7.1.2 WORKDIR</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-1-3-COPY\"><span class=\"toc-text\">7.1.3 COPY</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-1-4-RUN\"><span class=\"toc-text\">7.1.4 RUN</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-1-5-CMD\"><span class=\"toc-text\">7.1.5 CMD</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-1-6-ENTRYPOINT\"><span class=\"toc-text\">7.1.6 ENTRYPOINT</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-1-7-ENV\"><span class=\"toc-text\">7.1.7 ENV</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-1-8-ARG\"><span class=\"toc-text\">7.1.8 ARG</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#8-docker%E7%BD%91%E7%BB%9C\"><span class=\"toc-text\">8.docker网络</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#8-1-%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84\"><span class=\"toc-text\">8.1 网络结构</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#8-2-%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">8.2 网络模式</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8-2-1-%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">8.2.1 查看网络模式</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8-2-2-brige\"><span class=\"toc-text\">8.2.2 brige</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8-2-3-host\"><span class=\"toc-text\">8.2.3 host</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8-2-4-none\"><span class=\"toc-text\">8.2.4 none</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#9-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92docker-compse\"><span class=\"toc-text\">9. 容器编排docker-compse</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#10-%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0portainer\"><span class=\"toc-text\">10. 容器管理平台portainer</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#10-1-%E5%AE%89%E8%A3%85%E8%BF%90%E8%A1%8C\"><span class=\"toc-text\">10.1 安装运行</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#10-2-%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">10.2 访问服务</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#11-%E9%87%8D%E9%87%8F%E7%BA%A7%E7%9B%91%E6%8E%A7\"><span class=\"toc-text\">11.重量级监控</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#11-1-CAdvisor\"><span class=\"toc-text\">11.1 CAdvisor</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#11-2-InfluxDB\"><span class=\"toc-text\">11.2 InfluxDB</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#11-3-grafana\"><span class=\"toc-text\">11.3 grafana</span></a></li></ol></li></ol>","author":{"name":"黑白搬砖工","slug":"blog-author","avatar":"https://wolf-heart.oss-cn-beijing.aliyuncs.com/lg_22641_1606122876_5fbb7d7c432a1.jpeg","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"https://github.com/a601942905git","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/483440845930343","customs":{}}},"mapped":true,"prev_post":{},"next_post":{"title":"Redis单机、主从、哨兵、集群演进之路","uid":"c301ef2215df3326fec1a274349ffccd","slug":"Redis单机、主从、哨兵、集群演进之路","date":"2023-01-04T01:49:00.000Z","updated":"2023-01-04T01:51:10.985Z","comments":true,"path":"api/articles/Redis单机、主从、哨兵、集群演进之路.json","keywords":null,"cover":[],"text":"1.前言1.1 单机时代刚接触redis的时候，为了能快速学习和了解这门技术，我们通常会在自己的电脑上部署一个redis服务，以此来开启redis学习之路 1.2 主从时代随着对redis的进一步深入，很快就会发现这门技术在很多场景下都能得到应用，比如：并发场景下对共享资源的控制...","link":"","photos":[],"count_time":{"symbolsCount":"8.3k","symbolsTime":"8 mins."},"categories":[{"name":"redis","slug":"redis","count":3,"path":"api/categories/redis.json"}],"tags":[{"name":"redis","slug":"redis","count":2,"path":"api/tags/redis.json"},{"name":"master-slave","slug":"master-slave","count":1,"path":"api/tags/master-slave.json"},{"name":"sentinel","slug":"sentinel","count":1,"path":"api/tags/sentinel.json"},{"name":"cluster","slug":"cluster","count":1,"path":"api/tags/cluster.json"}],"author":{"name":"黑白搬砖工","slug":"blog-author","avatar":"https://wolf-heart.oss-cn-beijing.aliyuncs.com/lg_22641_1606122876_5fbb7d7c432a1.jpeg","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"https://github.com/a601942905git","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"https://juejin.cn/user/483440845930343","customs":{}}},"feature":true}}